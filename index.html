<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Jammer Endurance Plan</title>

<!-- ✅ PWA Manifest -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#6200ea">
<link rel="icon" href="icon-192.png" type="image/png">

<style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f9f9f9; }
    header { background: #222; color: #fff; text-align: center; padding: 10px; }
    .container { padding: 15px; max-width: 600px; margin: auto; }
    .button { display: block; background: #6200ea; color: #fff; text-align: center; padding: 12px; margin: 8px 0; text-decoration: none; border-radius: 6px; }
    .button:hover { background: #3700b3; }
    .hidden { display: none; }
    .workout { margin: 10px 0; padding: 10px; background: #fff; border-radius: 6px; box-shadow: 0 1px 4px rgba(0,0,0,0.1); }
    .progress-bar { width: 100%; background: #ccc; height: 12px; border-radius: 6px; margin: 10px 0; }
    .progress { height: 12px; background: #6200ea; border-radius: 6px; width: 0%; }
    .timer { font-size: 24px; text-align: center; margin: 10px 0; }
    .timer-controls button { padding: 8px 12px; margin: 4px; }
    .checklist input { margin-right: 8px; }
    .tabata-settings { text-align: center; margin-bottom: 10px; }
    .tabata-settings input { width: 50px; margin: 0 4px; text-align: center; }
    h3 { text-align: center; }
</style>
</head>
<body>
<header><h1>Jammer Endurance Plan</h1></header>
<div class="container" id="app">
    <!-- Home Screen -->
    <div id="home-screen">
        <h2>Select Week</h2>
        <div id="progress-container">
            <div class="progress-bar"><div class="progress" id="progress-bar"></div></div>
            <p id="progress-text">0% Complete</p>
        </div>
        <div>
            <button class="button" onclick="showWeek(1)">Week 1</button>
            <button class="button" onclick="showWeek(2)">Week 2</button>
            <button class="button" onclick="showWeek(3)">Week 3</button>
            <button class="button" onclick="showWeek(4)">Week 4</button>
            <button class="button" onclick="showWeek(5)">Week 5</button>
            <button class="button" onclick="showWeek(6)">Week 6</button>
        </div>
    </div>
    <!-- Week Screen -->
    <div id="week-screen" class="hidden">
        <h2 id="week-title">Week X</h2>
        <div id="workouts"></div>
        <button class="button" onclick="goHome()">Back to Weeks</button>
    </div>
    <!-- Timer Screen -->
    <div id="timer-screen" class="hidden">
        <h2 id="timer-title">Timer</h2>
        <h3>Standard Timer</h3>
        <div class="timer" id="timer-display">00:00</div>
        <div class="timer-controls">
            <button onclick="startTimer()">Start</button>
            <button onclick="pauseTimer()">Pause</button>
            <button onclick="resetTimer()">Reset</button>
        </div>
        <hr>
        <h3>Tabata Timer</h3>
        <div class="tabata-settings">
            Work: <input id="tabata-work" type="number" value="20">s
            Rest: <input id="tabata-rest" type="number" value="10">s
            Rounds: <input id="tabata-rounds" type="number" value="8">
        </div>
        <div class="timer" id="tabata-display">Ready</div>
        <div id="tabata-status" style="text-align:center;font-weight:bold;"></div>
        <div class="timer-controls">
            <button onclick="startTabata()">Start</button>
            <button onclick="stopTabata()">Stop</button>
        </div>
        <button class="button" onclick="backToWeek()">Back</button>
    </div>
</div>

<script>
// Workout plan
const plan = {
  1: {
    "Day 1 – Intervals & Plyos": "6 x 30s sprint / 30s walk, 2 rounds of 10 jump squats, 10 split lunges, 10 high knees.",
    "Day 2 – Tempo Endurance": "20 min moderate pace, every 5 min: 20s pickup.",
    "Day 3 – Sprint Circuit": "4 rounds: 30s shuttle sprints, 20 air squats, 10 lateral bounds, 10 burpees.",
    "Day 4 – Agility & Stamina": "Agility ladder drills + Tabata (skater bounds, mountain climbers, quick feet, jump squats)."
  },
  2: {"Day 1 – Intervals & Plyos": "8 x 30s sprint / 30s walk, 2 rounds plyos.",
       "Day 2 – Tempo Endurance": "25 min, pickups every 4 min.",
       "Day 3 – Sprint Circuit": "5 rounds of circuit.",
       "Day 4 – Agility & Stamina": "Add speed to drills, Tabata same as Week 1."},
  3: {"Day 1": "10 sprints, 3 rounds plyos.",
       "Day 2": "30 min tempo, pickups every 3 min.",
       "Day 3": "6 rounds circuit.",
       "Day 4": "Add resistance to agility drills."},
  4: {"Day 1": "12 sprints, incline if possible.",
       "Day 2": "35 min tempo, pickups every 3 min (30s).",
       "Day 3": "6 rounds, add backward sprint.",
       "Day 4": "Push speed on ladder."},
  5: {"Day 1": "8 sprints, 2 rounds plyos.",
       "Day 2": "30 min tempo, pickups every 4 min.",
       "Day 3": "5 rounds circuit.",
       "Day 4": "Maintain agility speed."},
  6: {"Day 1": "6 sprints easy, 2 rounds plyos.",
       "Day 2": "20 min light jog.",
       "Day 3": "4 rounds light circuit.",
       "Day 4": "Quick, sharp movements."}
};

let currentWeek = 1;
const progressKey = "jammer-progress";
let progressData = JSON.parse(localStorage.getItem(progressKey)) || {};

function updateProgress() {
  const totalWorkouts = 6 * 4;
  const done = Object.values(progressData).flat().length;
  const percent = Math.floor((done / totalWorkouts) * 100);
  document.getElementById("progress-bar").style.width = percent + "%";
  document.getElementById("progress-text").innerText = percent + "% Complete";
}

function showWeek(week) {
  currentWeek = week;
  document.getElementById("home-screen").classList.add("hidden");
  document.getElementById("week-screen").classList.remove("hidden");
  document.getElementById("week-title").innerText = `Week ${week}`;
  const container = document.getElementById("workouts");
  container.innerHTML = "";
  for (const [day, text] of Object.entries(plan[week])) {
    const done = progressData[week]?.includes(day);
    container.innerHTML += `
      <div class="workout">
        <label class="checklist">
          <input type="checkbox" ${done ? "checked" : ""} onchange="toggleWorkout(${week}, '${day}', this.checked)">
          <strong>${day}</strong><br><small>${text}</small>
        </label>
        <button class="button" onclick="openTimer('${day}')">Open Timer</button>
      </div>`;
  }
}

function goHome() {
  document.getElementById("week-screen").classList.add("hidden");
  document.getElementById("home-screen").classList.remove("hidden");
  updateProgress();
}

function toggleWorkout(week, day, checked) {
  if (!progressData[week]) progressData[week] = [];
  if (checked) {
    progressData[week].push(day);
  } else {
    progressData[week] = progressData[week].filter(d => d !== day);
  }
  localStorage.setItem(progressKey, JSON.stringify(progressData));
  updateProgress();
}

// Timer
let timer, seconds = 0;
function openTimer(title) {
  document.getElementById("week-screen").classList.add("hidden");
  document.getElementById("timer-screen").classList.remove("hidden");
  document.getElementById("timer-title").innerText = title;
}
function backToWeek() {
  document.getElementById("timer-screen").classList.add("hidden");
  document.getElementById("week-screen").classList.remove("hidden");
  resetTimer();
  stopTabata();
}
function startTimer() {
  if (timer) return;
  timer = setInterval(() => {
    seconds++;
    const m = String(Math.floor(seconds / 60)).padStart(2, "0");
    const s = String(seconds % 60).padStart(2, "0");
    document.getElementById("timer-display").innerText = `${m}:${s}`;
  }, 1000);
}
function pauseTimer() {
  clearInterval(timer);
  timer = null;
}
function resetTimer() {
  pauseTimer();
  seconds = 0;
  document.getElementById("timer-display").innerText = "00:00";
}

// Tabata
let tabataTimer, tabataRound = 0, tabataMode = "work", tabataRemaining = 0;
function startTabata() {
  if (tabataTimer) return;
  const work = parseInt(document.getElementById("tabata-work").value);
  const rest = parseInt(document.getElementById("tabata-rest").value);
  const rounds = parseInt(document.getElementById("tabata-rounds").value);
  tabataRound = 1;
  tabataMode = "work";
  tabataRemaining = work;
  updateTabataDisplay(work, rest, rounds);
  tabataTimer = setInterval(() => {
    tabataRemaining--;
    if (tabataRemaining <= 0) {
      if (tabataMode === "work") {
        tabataMode = "rest";
        tabataRemaining = rest;
      } else {
        tabataRound++;
        if (tabataRound > rounds) {
          stopTabata();
          document.getElementById("tabata-display").innerText = "Done!";
          return;
        }
        tabataMode = "work";
        tabataRemaining = work;
      }
    }
    updateTabataDisplay(work, rest, rounds);
  }, 1000);
}
function updateTabataDisplay(work, rest, rounds) {
  const m = String(Math.floor(tabataRemaining / 60)).padStart(2, "0");
  const s = String(tabataRemaining % 60).padStart(2, "0");
  document.getElementById("tabata-display").innerText = `${m}:${s}`;
  document.getElementById("tabata-status").innerText = `Round ${tabataRound}/${rounds} - ${tabataMode.toUpperCase()}`;
}
function stopTabata() {
  clearInterval(tabataTimer);
  tabataTimer = null;
  tabataRemaining = 0;
  document.getElementById("tabata-display").innerText = "Ready";
  document.getElementById("tabata-status").innerText = "";
}

updateProgress();

// PWA Service Worker
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js')
    .then(() => console.log('Service Worker Registered'));
}
</script>
</body>
</html>